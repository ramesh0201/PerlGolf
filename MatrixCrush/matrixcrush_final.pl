($a,$b,@d,@c,@e) = @ARGV;
for $i(1..$a) {
	for $j(1..$b) {
		$e[$i][$j]=$c[$i][$j]=$d[($i-1)*$b+$j-1];
	}
}
for $i(1..$a) {
	for $j(1..$b) {
		if("@{$e[$i-1]}[$j-1..$j+1]$e[$i][$j-1]$e[$i][$j+1]@{$e[$i+1]}[$j-1..$j+1]"=~/$e[$i][$j]/){
			$c[$i][$j]=0;
		}
	}
}
@g=map{[@$_]}@c;
sub z {
	($k,$l,$m,$n,$t)=@_;
	$u=$m;
	for $r($k..$l) {
		for $s($m..$n) {
			if($t) {
			$s=--$u;
			}
			$p=$g[$r][$s];
			$o=$g[$i][$j];
			if($p==$o) {
				$c[$r][$s]=$c[$i][$j]=0;
			}
			elsif($p&&$p!=$o) {
				last;
			}
		}
	}
}
for $i(1..$a) {
	for $j(1..$b) {
#		z($i,$i,$j+1,$b);
#		z($i+1,$a,$j,$j,1);
#		print "@{$g[$i]}[$j-1..$j+1]\n";
		if ("@{$g[$i]}[$j+1..$b]"=~/(0 )*$g[$i][$j]/||"@{$g[$i]}[1..$j-1]"=~/$g[$i][$j] (0 )*/){
			$c[$i][$j]=0;
		}
		$h+=$v=$c[$i][$j];
		print"$v ";
	}
	print$/;
}
print$h;
